<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Booking Calculator - SmartBooking</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container-fluid">
            <a class="navbar-brand" href="index.html">
                <img src="Picture1.png" alt="logo" height="60">
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="hotel.html">Hotels</a></li>
                    <li class="nav-item"><a class="nav-link" href="event.html">Event</a></li>
                    <li class="nav-item"><a class="nav-link" href="booking.html">Booking</a></li>
                    <li class="nav-item"><a class="nav-link" href="userDash.html">User Dashboard</a></li>
                    <li class="nav-item"><a class="nav-link" href="adminDash.html">Admin Dashboard</a></li>
                    <li class="nav-item"><a class="nav-link" href="questionnaire.html">Feedback</a></li>
                    <li class="nav-item"><a class="nav-link active" href="calculate.html">Calculator</a></li>
                    <li class="nav-item"><a class="nav-link" href="funpage.html">Fun Page</a></li>
                    <li class="nav-item"><a class="nav-link" href="help.html">Help</a></li>
                    <li class="nav-item"><a class="nav-link" href="aboutUs.html">About Us</a></li>
                    <li class="nav-item"><a class="nav-link" href="contactUs.html">Contact Us</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container my-5">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="card shadow-lg">
                    <div class="card-header bg-primary text-white text-center">
                        <h2 class="mb-0">Booking Cost Calculator</h2>
                        <p class="mb-0 mt-2">Calculate your total booking cost with discounts and taxes</p>
                    </div>
                    <div class="card-body p-4">
                        <!-- UPDATED: Form now submits to PHP -->
                        <form id="calculatorForm" action="processCalculate.php" method="post">
                            <!-- Booking Type Selection -->
                            <div class="mb-4">
                                <label class="form-label fw-bold">Booking Type *</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="bookingType" id="typeHotel" value="hotel" checked onchange="updateBookingType()">
                                    <label class="form-check-label" for="typeHotel">Hotel Booking</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="bookingType" id="typeEvent" value="event" onchange="updateBookingType()">
                                    <label class="form-check-label" for="typeEvent">Event Ticket</label>
                                </div>
                            </div>

                            <!-- Hotel Options -->
                            <div id="hotelOptions" class="mb-4">
                                <label for="hotelSelect" class="form-label fw-bold">Select Hotel *</label>
                                <select class="form-select" id="hotelSelect" name="hotelSelect" onchange="updatePrice()">
                                    <option value="45">Crowne Plaza Muscat - 45 OMR/night</option>
                                    <option value="32">Mercure Muscat - 32 OMR/night</option>
                                    <option value="28">Ibis Muscat - 28 OMR/night</option>
                                </select>

                                <label for="nights" class="form-label fw-bold mt-3">Number of Nights *</label>
                                <input type="number" class="form-control" id="nights" name="nights" min="1" value="1" onchange="calculateTotal()">
                            </div>

                            <!-- Event Options -->
                            <div id="eventOptions" class="mb-4" style="display: none;">
                                <label for="eventSelect" class="form-label fw-bold">Select Event *</label>
                                <select class="form-select" id="eventSelect" name="eventSelect" onchange="updatePrice()">
                                    <option value="10">Winter Music Festival - 10 OMR</option>
                                    <option value="3">Art Expo & Market - 3 OMR</option>
                                    <option value="5">Food Carnival - 5 OMR</option>
                                    <option value="25">New Year Gala - 25 OMR</option>
                                </select>

                                <label for="tickets" class="form-label fw-bold mt-3">Number of Tickets *</label>
                                <input type="number" class="form-control" id="tickets" name="tickets" min="1" value="1" onchange="calculateTotal()">
                            </div>

                            <!-- Room/Ticket Type -->
                            <div class="mb-4">
                                <label for="roomType" class="form-label fw-bold">Room/Ticket Type *</label>
                                <select class="form-select" id="roomType" name="roomType" onchange="calculateTotal()">
                                    <option value="1">Standard (No extra charge)</option>
                                    <option value="1.3">Deluxe (+30%)</option>
                                    <option value="1.5">Suite/VIP (+50%)</option>
                                </select>
                            </div>

                            <!-- Customer Age -->
                            <div class="mb-4">
                                <label for="age" class="form-label fw-bold">Customer Age *</label>
                                <input type="number" class="form-control" id="age" name="age" min="0" max="120" value="30" onchange="calculateTotal()">
                                <small class="form-text text-muted">Senior citizens (60+) receive a 10% discount</small>
                            </div>

                            <!-- Loyalty Member -->
                            <div class="mb-4">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="loyaltyMember" name="loyaltyMember" onchange="calculateTotal()">
                                    <label class="form-check-label" for="loyaltyMember">
                                        I am a loyalty member (5% additional discount)
                                    </label>
                                </div>
                            </div>

                            <!-- Seasonal Promotion -->
                            <div class="mb-4">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="seasonalPromo" name="seasonalPromo" onchange="calculateTotal()">
                                    <label class="form-check-label" for="seasonalPromo">
                                        Apply seasonal promotion (15% off - Limited time!)
                                    </label>
                                </div>
                            </div>

                            <!-- Calculate Button -->
                            <div class="d-grid mb-4">
                                <button type="submit" class="btn btn-success btn-lg">
                                    Calculate Total Cost
                                </button>
                            </div>

                            <!-- Results Display (JavaScript preview) -->
                            <div id="results" class="alert alert-info" style="display: none;">
                                <h4 class="alert-heading">Cost Breakdown (Preview)</h4>
                                <hr>
                                <div id="breakdown"></div>
                                <p class="mb-0"><small>Click "Calculate Total Cost" to get detailed results</small></p>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="container-fluid bg-light py-3 mt-5">
        <div class="container text-center text-muted small">
            Â©2025 Smart Booking | by Leader Team. All rights reserved
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        function updateBookingType() {
            const bookingType = document.querySelector('input[name="bookingType"]:checked').value;
            const hotelOptions = document.getElementById('hotelOptions');
            const eventOptions = document.getElementById('eventOptions');
            
            if (bookingType === 'hotel') {
                hotelOptions.style.display = 'block';
                eventOptions.style.display = 'none';
            } else {
                hotelOptions.style.display = 'none';
                eventOptions.style.display = 'block';
            }
            calculateTotal();
        }

        function updatePrice() {
            calculateTotal();
        }

        function calculateTotal() {
            const bookingType = document.querySelector('input[name="bookingType"]:checked').value;
            let basePrice = 0;
            let quantity = 0;
            
            if (bookingType === 'hotel') {
                basePrice = parseFloat(document.getElementById('hotelSelect').value);
                quantity = parseInt(document.getElementById('nights').value);
            } else {
                basePrice = parseFloat(document.getElementById('eventSelect').value);
                quantity = parseInt(document.getElementById('tickets').value);
            }
            
            const typeMultiplier = parseFloat(document.getElementById('roomType').value);
            const subtotal = basePrice * quantity * typeMultiplier;
            
            const age = parseInt(document.getElementById('age').value);
            let discountPercentage = 0;
            
            if (age >= 60) discountPercentage += 10;
            if (document.getElementById('loyaltyMember').checked) discountPercentage += 5;
            if (document.getElementById('seasonalPromo').checked) discountPercentage += 15;
            
            const discount = subtotal * (discountPercentage / 100);
            const priceAfterDiscount = subtotal - discount;
            const tax = priceAfterDiscount * 0.05;
            let finalTotal = priceAfterDiscount + tax;
            
            if ((bookingType === 'hotel' && quantity >= 7) || (bookingType === 'event' && quantity >= 10)) {
                finalTotal = finalTotal * 0.95;
            }
            
            // Show preview
            const resultsDiv = document.getElementById('results');
            const breakdownDiv = document.getElementById('breakdown');
            breakdownDiv.innerHTML = `
                <p><strong>Subtotal:</strong> ${subtotal.toFixed(2)} OMR</p>
                ${discountPercentage > 0 ? `<p><strong>Discount:</strong> -${discount.toFixed(2)} OMR (${discountPercentage}%)</p>` : ''}
                <p><strong>Tax (5%):</strong> +${tax.toFixed(2)} OMR</p>
                <p><strong>Estimated Total:</strong> ${finalTotal.toFixed(3)} OMR</p>
            `;
            resultsDiv.style.display = 'block';
        }

        window.onload = function() {
            updateBookingType();
        };
    </script>
</body>
</html>